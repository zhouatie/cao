### 项目结构

```
src/zhouatie_cao/
├── __init__.py        # 包初始化文件
├── __main__.py        # 入口模块
├── main.py            # 主逻辑模块
├── config.py          # 配置管理模块
└── config_cli.py      # 配置命令行接口
```

### 配置系统

`config.py` 模块负责配置管理，包括：

-   加载用户配置 (~/.cao/config.json)
-   保存用户配置
-   管理模型配置（添加、删除、设置默认）

`config_cli.py` 提供了用户友好的命令行界面，用于:

-   交互式配置
-   列出所有配置的模型
-   添加/更新/删除模型
-   设置默认模型

用户可以通过运行 `cao --config` 来访问配置界面。

### Release Commands Checklist

1. **Update Version Numbers**:

    ```bash
    # Update version in setup.py
    sed -i '' 's/version="1.0.0"/version="1.0.1"/' setup.py
    ```

2. **Create Git Tag**:

    ```bash
    git tag -a v1.0.1 -m "Release v1.0.1"
    git push origin v1.0.1
    ```

3. **Build the Package**:

    ```bash
    # Clean previous builds
    rm -rf dist/ build/ *.egg-info/

    # Build the distribution packages
    python -m pip install --upgrade build
    python -m build
    ```

4. **Upload to PyPI**:

    ```bash
    # Install twine if not already installed
    python -m pip install --upgrade twine

    # Upload to PyPI
    python -m twine upload dist/*
    ```

5. **Update Homebrew Formula**:

    ```bash
    # After uploading to GitHub, calculate new SHA256
    curl -sL https://github.com/zhouatie/cao/archive/refs/tags/v1.0.1.tar.gz | shasum -a 256

    # Update the Homebrew formula
    # Edit Homebrew/cao.rb to update:
    # - url to point to new version
    # - sha256 with the new hash
    ```

6. **Test Installation**:

    ```bash
    # Test pip installation
    pip install --force-reinstall zhouatie-cao

    # Test brew installation
    brew update
    brew upgrade cao
    ```

### Example Workflow

For a new version (e.g., 1.0.1), your complete workflow would look like:

1. Make and commit your changes
2. Update the version in `setup.py`
3. Create and push a git tag
4. Build the distribution packages
5. Upload to PyPI
6. Update the Homebrew formula with the new URL and SHA256
7. Commit and push the updated Homebrew formula
8. Test both installation methods

The most critical steps are ensuring that the version numbers are consistent across:

1. `setup.py`
2. The git tag
3. The Homebrew formula URL

If you're using GitHub releases, you'd also want to create a new release on GitHub after pushing the tag, which would help with the Homebrew formula update as the tarball URL would be available.
